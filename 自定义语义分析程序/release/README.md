# 自定义语义分析程序

## 项目简介

本程序是编译原理课程的作业项目，实现了多种语义分析方法的集成，包括S属性文法语义分析、L属性文法语义分析和依赖图语义分析。程序提供了直观的图形用户界面，支持文法定义、语义分析过程可视化和结果展示。

## 作者信息

- **作者**: 王海翔
- **学号**: 2021060187
- **班级**: 计科2203
- **课程**: 编译原理
- **题目**: 6.4 自定义语义分析程序

## 功能特性

### 核心功能
- ✅ **S属性文法语义分析**: 支持只包含综合属性的文法
- ✅ **L属性文法语义分析**: 支持包含继承属性和综合属性的L属性文法
- ✅ **依赖图语义分析**: 通过构建属性依赖图进行语义分析
- ✅ **文法特性验证**: 自动验证文法是否满足S属性或L属性特性
- ✅ **循环依赖检测**: 检测并报告属性依赖中的循环依赖

### 界面特性
- 🖥️ **图形用户界面**: 基于Tkinter的直观GUI界面
- 📝 **文法编辑器**: 支持文法定义的输入、编辑和保存
- 📊 **分析过程可视化**: 详细显示语义分析的每个步骤
- 📋 **结果展示**: 清晰展示属性值表和符号表
- 💾 **文件操作**: 支持文法文件的加载和保存

### 技术特性
- 🔍 **错误处理**: 完善的错误检测和报告机制
- 🧪 **单元测试**: 全面的测试用例覆盖
- 📚 **中文文档**: 完整的中文用户手册和技术文档
- 📦 **可执行文件**: 支持打包为独立的.exe文件

## 快速开始

### 环境要求
- Python 3.7+
- tkinter (通常随Python安装)
- 其他依赖见 `requirements.txt`

### 安装步骤

1. **克隆或下载项目**
   ```bash
   # 如果使用Git
   git clone <repository-url>
   cd 自定义语义分析程序
   ```

2. **安装依赖**
   ```bash
   pip install -r requirements.txt
   ```

3. **运行程序**
   ```bash
   python custom_semantic_analyzer.py
   ```

### 使用示例

1. **启动程序**
   - 运行 `custom_semantic_analyzer.py`
   - 程序将打开图形用户界面

2. **定义文法**
   - 在"文法输入"标签页中输入属性文法
   - 点击"解析文法"按钮
   - 查看解析结果

3. **执行语义分析**
   - 切换到"语义分析"标签页
   - 选择分析类型（S属性文法、L属性文法或依赖图）
   - 输入测试字符串和语法分析结果
   - 点击"开始语义分析"

4. **查看结果**
   - 在"分析结果"标签页查看属性值表和符号表
   - 分析过程会详细显示在"语义分析"标签页中

## 文法格式

程序支持的文法格式包含三个部分：

```
[文法]
E -> E + T
E -> T
T -> num

[属性定义]
E.val : 综合 整数 0 "表达式值"
T.val : 综合 整数 0 "项值"
num.val : 综合 整数 0 "数字值"

[语义规则]
E.val := E.val + T.val
E.val := T.val
T.val := num.val
```

### 详细说明

- **[文法]**: 定义上下文无关文法的产生式
- **[属性定义]**: 定义每个符号的属性，格式为 `符号.属性 : 类型 数据类型 默认值 "描述"`
- **[语义规则]**: 定义语义动作，格式为 `目标属性 := 表达式`

## 示例文法

程序提供了多个示例文法，包括：
- 简单算术表达式文法 (S属性)
- 变量声明文法 (L属性)
- 赋值语句文法 (依赖图)
- 布尔表达式文法 (S属性)
- 函数调用文法 (L属性)
- 数组访问文法 (依赖图)

详细示例请参考 `sample_grammars.txt` 文件。

## 测试

运行测试用例：
```bash
python comprehensive_test.py
```

运行单独的测试：
```bash
python test_s_attribute.py      # S属性文法测试
python test_l_attribute.py      # L属性文法测试
python test_dependency_graph.py # 依赖图测试
```

## 文件结构

```
自定义语义分析程序/
├── custom_semantic_analyzer.py    # 主程序文件
├── comprehensive_test.py          # 综合测试程序
├── test_s_attribute.py           # S属性文法测试
├── test_l_attribute.py           # L属性文法测试
├── test_dependency_graph.py      # 依赖图测试
├── sample_grammars.txt           # 示例文法集合
├── requirements.txt              # 依赖列表
├── README.md                     # 项目说明
├── 用户手册.md                   # 用户手册
├── 技术文档.md                   # 技术文档
└── build_exe.py                  # 打包脚本
```

## 技术架构

程序采用模块化设计，主要组件包括：

- **基础数据结构**: 属性定义、文法符号、产生式、语义规则等
- **文法解析器**: 解析文法定义文件
- **语义分析器**: S属性、L属性和依赖图三种分析器
- **依赖图引擎**: 构建依赖图、拓扑排序、循环检测
- **GUI界面**: 基于Tkinter的图形用户界面
- **测试框架**: 完整的单元测试和集成测试

## 贡献指南

欢迎提出问题和建议！如果您发现bug或有改进建议，请：

1. 查看现有的issue
2. 创建新的issue描述问题
3. 如果可能，提供复现步骤
4. 欢迎提交Pull Request

## 许可证

本项目仅用于学习和教学目的。

## 联系方式

如有问题，请联系：
- 邮箱: [学生邮箱]
- 学号: 2021060187
- 班级: 计科2203

---

*最后更新: 2025年6月*

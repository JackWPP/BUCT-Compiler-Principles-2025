# 自定义语义分析程序用户手册

## 目录
1. [程序概述](#程序概述)
2. [安装与启动](#安装与启动)
3. [界面介绍](#界面介绍)
4. [使用教程](#使用教程)
5. [文法格式说明](#文法格式说明)
6. [示例演示](#示例演示)
7. [常见问题](#常见问题)
8. [故障排除](#故障排除)

## 程序概述

自定义语义分析程序是一个集成了多种语义分析方法的教学工具，主要用于编译原理课程的学习和实验。程序支持以下三种语义分析方法：

- **S属性文法语义分析**: 适用于只包含综合属性的文法
- **L属性文法语义分析**: 适用于包含继承属性和综合属性的L属性文法
- **依赖图语义分析**: 通过构建属性依赖图进行通用的语义分析

### 主要特点
- 直观的图形用户界面
- 支持多种语义分析方法
- 详细的分析过程展示
- 完善的错误检测和报告
- 丰富的示例文法

## 安装与启动

### 系统要求
- 操作系统: Windows 7/8/10/11
- Python 3.7 或更高版本
- 至少 100MB 可用磁盘空间

### 安装步骤

#### 方法一：使用Python源码
1. 确保已安装Python 3.7+
2. 下载程序源码到本地目录
3. 打开命令提示符，进入程序目录
4. 安装依赖：`pip install -r requirements.txt`
5. 运行程序：`python custom_semantic_analyzer.py`

#### 方法二：使用可执行文件
1. 下载 `自定义语义分析程序.exe`
2. 双击运行即可

### 启动程序
程序启动后会显示主界面，包含四个标签页：
- 文法输入
- 语义分析
- 分析结果
- 使用帮助

## 界面介绍

### 主界面布局
程序采用标签页设计，每个标签页负责不同的功能模块。

### 文法输入标签页
- **左侧区域**: 文法定义输入框
  - 支持多行文本输入
  - 语法高亮显示
  - 支持文件加载和保存
- **右侧区域**: 解析结果显示框
  - 显示文法解析结果
  - 显示产生式、属性定义和语义规则
- **按钮区域**:
  - `解析文法`: 解析当前输入的文法
  - `清空`: 清空输入框内容
  - `加载文件`: 从文件加载文法
  - `保存文件`: 保存文法到文件
  - `验证S属性特性`: 验证文法是否满足S属性特性
  - `验证L属性特性`: 验证文法是否满足L属性特性

### 语义分析标签页
- **分析配置区域**:
  - 分析类型选择（单选按钮）
  - 输入串输入框
  - 语法分析结果输入框
  - `开始语义分析`按钮
- **分析过程显示区域**:
  - 详细显示每个分析步骤
  - 显示属性计算过程
  - 显示错误信息（如有）

### 分析结果标签页
- **左侧**: 属性值表
  - 显示所有计算出的属性值
  - 格式：属性名 = 属性值
- **右侧**: 符号表
  - 显示符号表中的所有符号
  - 包含符号名称、类型、值和作用域

### 使用帮助标签页
- 显示程序的使用说明
- 包含文法格式说明
- 提供使用示例

## 使用教程

### 第一步：定义文法
1. 切换到"文法输入"标签页
2. 在左侧输入框中输入属性文法定义
3. 文法格式包含三个部分：`[文法]`、`[属性定义]`、`[语义规则]`
4. 点击"解析文法"按钮
5. 在右侧查看解析结果

### 第二步：验证文法特性（可选）
1. 点击"验证S属性特性"或"验证L属性特性"按钮
2. 查看验证结果对话框
3. 如果验证失败，会显示具体的错误信息

### 第三步：执行语义分析
1. 切换到"语义分析"标签页
2. 选择分析类型（S属性文法、L属性文法或依赖图）
3. 在"输入串"框中输入要分析的字符串
4. 在"语法分析结果"框中输入产生式编号序列
5. 点击"开始语义分析"按钮
6. 观察分析过程的详细显示

### 第四步：查看分析结果
1. 切换到"分析结果"标签页
2. 查看左侧的属性值表
3. 查看右侧的符号表
4. 分析结果包含所有计算出的属性值

## 文法格式说明

### 基本格式
文法定义文件包含三个必需的部分：

```
[文法]
产生式定义...

[属性定义]
属性定义...

[语义规则]
语义规则定义...
```

### [文法] 部分
定义上下文无关文法的产生式，格式为：
```
左部 -> 右部符号1 右部符号2 ...
```

示例：
```
[文法]
E -> E + T
E -> T
T -> T * F
T -> F
F -> ( E )
F -> num
```

### [属性定义] 部分
定义每个文法符号的属性，格式为：
```
符号.属性名 : 属性类型 数据类型 默认值 "描述"
```

- **属性类型**: `综合` 或 `继承`
- **数据类型**: `整数`、`浮点数`、`字符串`、`布尔值`等
- **默认值**: 属性的初始值
- **描述**: 属性的说明（可选）

示例：
```
[属性定义]
E.val : 综合 整数 0 "表达式值"
T.val : 综合 整数 0 "项值"
F.val : 综合 整数 0 "因子值"
num.val : 综合 整数 0 "数字值"
```

### [语义规则] 部分
定义语义动作，格式为：
```
目标属性 := 表达式
```

示例：
```
[语义规则]
E.val := E.val + T.val
E.val := T.val
T.val := T.val * F.val
T.val := F.val
F.val := E.val
F.val := num.val
```

## 示例演示

### 示例1：简单算术表达式

**步骤1**: 输入文法
```
[文法]
E -> E + T
E -> T
T -> num

[属性定义]
E.val : 综合 整数 0 "表达式值"
T.val : 综合 整数 0 "项值"
num.val : 综合 整数 0 "数字值"

[语义规则]
E.val := E.val + T.val
E.val := T.val
T.val := num.val
```

**步骤2**: 设置分析参数
- 分析类型：S属性文法
- 输入串：`3 + 5`
- 语法分析结果：`2 1 2 1 0`

**步骤3**: 执行分析
点击"开始语义分析"，观察分析过程。

**预期结果**:
- E.val = 8 (3 + 5的结果)

### 示例2：变量声明

**步骤1**: 输入L属性文法
```
[文法]
D -> T L
T -> int
L -> id

[属性定义]
T.type : 综合 字符串 "" "类型信息"
L.in : 继承 字符串 "" "继承类型"
id.name : 综合 字符串 "" "标识符名称"

[语义规则]
L.in := T.type
T.type := "int"
L.in := L.in
```

**步骤2**: 设置分析参数
- 分析类型：L属性文法
- 输入串：`int x`
- 语法分析结果：`1 2 0`

**步骤3**: 执行分析
观察继承属性的传递过程。

## 常见问题

### Q1: 程序无法启动怎么办？
**A1**: 
1. 检查Python版本是否为3.7+
2. 确认已安装所有依赖包
3. 检查是否有权限问题
4. 尝试以管理员身份运行

### Q2: 文法解析失败怎么办？
**A2**:
1. 检查文法格式是否正确
2. 确认三个部分都存在：[文法]、[属性定义]、[语义规则]
3. 检查产生式格式是否使用"->"
4. 检查语义规则是否使用":="

### Q3: 语义分析失败怎么办？
**A3**:
1. 检查输入串格式是否正确
2. 确认语法分析结果是否为数字序列
3. 验证文法是否满足相应的属性特性
4. 检查是否存在循环依赖

### Q4: 如何理解语法分析结果？
**A4**:
语法分析结果是产生式编号的序列，表示自底向上归约的顺序。例如：
- 产生式0: E -> E + T
- 产生式1: E -> T
- 产生式2: T -> num
- 序列"2 1 2 1 0"表示：num->T, T->E, num->T, T->E, E+T->E

## 故障排除

### 程序崩溃
1. 查看错误信息
2. 检查输入数据格式
3. 重启程序
4. 联系技术支持

### 分析结果不正确
1. 验证文法定义是否正确
2. 检查语义规则是否合理
3. 确认输入数据格式
4. 使用示例文法进行对比测试

### 界面显示异常
1. 检查屏幕分辨率设置
2. 尝试调整窗口大小
3. 重启程序
4. 更新显卡驱动

---

**技术支持**
- 作者：王海翔
- 学号：2021060187
- 班级：计科2203

如有其他问题，请参考技术文档或联系作者。

---

*最后更新: 2025年6月*

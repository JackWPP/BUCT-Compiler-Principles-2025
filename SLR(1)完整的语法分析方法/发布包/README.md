# SLR(1)完整的语法分析方法

## 项目信息
- **课程**: 编译原理
- **作业**: 题目4.7 SLR(1)完整的语法分析方法
- **作者**: 王海翔
- **学号**: 2021060187
- **班级**: 计科2203

## 功能概述

本程序实现了SLR(1)完整的语法分析方法，包括：

1. **文法处理**
   - 上下文无关文法的识别和解析
   - 文法的拓广
   - FIRST集合和FOLLOW集合的计算

2. **LR(0)自动机构建**
   - LR(0)项目集族的构建
   - 状态转换图的生成
   - 闭包和GOTO函数的实现

3. **SLR(1)分析表构建**
   - ACTION表的构建（移进、归约、接受、错误动作）
   - GOTO表的构建
   - 冲突检测和报告

4. **语法分析过程**
   - 基于栈的SLR(1)语法分析算法
   - 详细的分析步骤记录
   - 错误检测和报告

5. **可视化功能**
   - LR(0)自动机状态转换图的可视化
   - 交互式状态查看
   - 图片导出功能

6. **用户界面**
   - 现代化的GUI界面
   - 多标签页设计
   - 文件加载和保存功能

## 安装和运行

### 环境要求
- Python 3.7+
- tkinter (通常随Python安装)
- matplotlib
- networkx
- numpy

### 安装依赖
```bash
pip install -r requirements.txt
```

### 运行程序
```bash
python slr1_main.py
```

## 使用说明

### 1. 文法输入

在"文法输入"标签页中：

1. **输入文法格式**：
   ```
   左部 -> 右部1 | 右部2 | ...
   ```

2. **示例文法**：
   ```
   E -> E + T | T
   T -> T * F | F
   F -> ( E ) | id
   ```

3. **操作步骤**：
   - 输入文法
   - 设置开始符号
   - 点击"解析文法"
   - 点击"构建分析器"

### 2. SLR(1)分析表

在"SLR(1)分析表"标签页中：

1. **生成分析表**：点击"生成分析表"按钮
2. **查看冲突**：点击"检查冲突"按钮
3. **保存分析表**：点击"保存分析表"按钮

### 3. 语法分析过程

在"语法分析过程"标签页中：

1. **输入字符串**：在输入框中输入要分析的字符串
2. **开始分析**：点击"开始分析"按钮
3. **查看步骤**：在表格中查看详细的分析步骤
4. **查看结果**：在右侧查看分析结果和详细信息

### 4. 自动机可视化

在"自动机可视化"标签页中：

1. **生成可视化**：点击"生成LR(0)自动机"按钮
2. **查看状态**：在下拉框中选择状态查看详情
3. **保存图片**：点击"保存图片"按钮导出

## 快捷键

- `Ctrl+O`：加载文法文件
- `Ctrl+S`：保存分析过程
- `F5`：开始语法分析
- `Ctrl+L`：清空输入

## 核心算法

### 1. 文法拓广
- 为原文法添加新的开始符号S'
- 创建拓广产生式 S' -> S

### 2. FIRST集合计算
- 迭代算法计算每个符号的FIRST集合
- 处理空产生式的情况

### 3. FOLLOW集合计算
- 基于FIRST集合计算FOLLOW集合
- 处理产生式右部的符号串

### 4. LR(0)自动机构建
- 项目集闭包计算
- GOTO函数实现
- 状态转换图构建

### 5. SLR(1)分析表构建
- **ACTION表**：
  - 移进动作：对于项目A -> α•aβ，在ACTION[i,a]中填入"移进j"
  - 归约动作：对于项目A -> α•，在ACTION[i,a]中填入"归约k"（a∈FOLLOW(A)）
  - 接受动作：对于项目S' -> S•，在ACTION[i,$]中填入"接受"
- **GOTO表**：对于非终结符A，GOTO[i,A] = j

### 6. SLR(1)语法分析算法
- 使用状态栈和符号栈
- 根据当前状态和输入符号查表执行动作
- 移进、归约、接受或报错

## 技术特点

1. **完整实现**：包含SLR(1)分析的所有步骤
2. **详细注释**：所有代码都有详细的中文注释
3. **错误处理**：完善的异常处理机制
4. **用户友好**：直观的GUI界面和操作提示
5. **可视化**：直观的自动机状态转换图

## 注意事项

1. **文法格式**：严格按照指定格式输入
2. **符号约定**：区分终结符和非终结符
3. **SLR(1)限制**：只能处理SLR(1)文法，有冲突的文法会报告错误
4. **性能考虑**：大型文法的可视化可能较慢
5. **编码支持**：支持UTF-8编码的文本文件

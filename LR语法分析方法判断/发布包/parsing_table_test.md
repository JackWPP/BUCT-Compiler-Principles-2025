# LR分析表生成功能测试文档

## 测试目标
验证LR语法分析器中生成分析表功能的正确性，包括ACTION表和GOTO表的生成。

## 测试环境
- 程序：lr_parser_gui.py
- 测试文法：多种类型的上下文无关文法
- 测试方法：LR(0)、SLR(1)、LR(1)、LALR(1)

## 测试用例

### 测试用例1：简单算术表达式文法（SLR(1)）
```
文法：
E -> E + T | T
T -> T * F | F
F -> ( E ) | id

开始符号：E

预期结果：
- LR(0)：存在冲突
- SLR(1)：无冲突，可生成分析表
- LR(1)：无冲突，可生成分析表
- LALR(1)：无冲突，可生成分析表
```

### 测试用例2：LR(0)文法
```
文法：
S -> A a
A -> b

开始符号：S

预期结果：
- LR(0)：无冲突，可生成分析表
- SLR(1)：无冲突，可生成分析表
- LR(1)：无冲突，可生成分析表
- LALR(1)：无冲突，可生成分析表
```

### 测试用例3：存在移进-归约冲突的文法
```
文法：
S -> E
E -> E + E | E * E | id

开始符号：S

预期结果：
- LR(0)：存在移进-归约冲突
- SLR(1)：存在移进-归约冲突
- LR(1)：存在移进-归约冲突
- LALR(1)：存在移进-归约冲突
```

### 测试用例4：悬挂else问题
```
文法：
S -> if E then S else S | if E then S | a
E -> b

开始符号：S

预期结果：
- LR(0)：存在移进-归约冲突
- SLR(1)：存在移进-归约冲突
- LR(1)：可能无冲突（取决于具体实现）
- LALR(1)：存在移进-归约冲突
```

## 测试步骤

1. **启动程序**
   - 运行 `python lr_parser_gui.py`
   - 确认GUI界面正常显示

2. **输入测试文法**
   - 在"文法输入"标签页中输入测试文法
   - 设置正确的开始符号
   - 点击"解析文法"按钮

3. **执行LR分析**
   - 切换到"LR分析"标签页
   - 点击"执行LR分析"按钮
   - 检查LR类型判断结果

4. **生成分析表**
   - 点击"生成分析表"按钮
   - 检查是否弹出分析表窗口
   - 验证各个LR方法的分析表

5. **验证分析表内容**
   - 检查ACTION表的移进动作（s状态号）
   - 检查ACTION表的归约动作（r产生式号）
   - 检查ACTION表的接受动作（acc）
   - 检查GOTO表的状态转换
   - 验证冲突标记的正确性

## 预期功能

### ACTION表格式
```
状态    终结符1    终结符2    ...    $
0       s1        r2        ...    
1       s3        s4        ...    acc
...
```

### GOTO表格式
```
状态    非终结符1    非终结符2    ...
0       1           2           ...
1       3           4           ...
...
```

### 冲突表示
- 移进-归约冲突："冲突: s状态号 / r产生式号"
- 归约-归约冲突："冲突: r产生式号1 / r产生式号2"

## 测试验证点

1. **表格完整性**
   - 所有状态都有对应的行
   - 所有相关符号都有对应的列
   - 空白单元格正确显示为空

2. **动作正确性**
   - 移进动作指向正确的状态
   - 归约动作使用正确的产生式
   - 接受动作出现在正确位置

3. **冲突检测**
   - 正确识别移进-归约冲突
   - 正确识别归约-归约冲突
   - 冲突信息格式正确

4. **界面功能**
   - 分析表窗口正常显示
   - 标签页切换正常
   - 保存和复制功能正常

## 错误处理测试

1. **无效文法**
   - 输入空文法
   - 输入格式错误的文法
   - 缺少开始符号

2. **未执行分析**
   - 在未执行LR分析前生成分析表
   - 应显示警告信息

## 性能测试

1. **大型文法**
   - 测试包含20+产生式的文法
   - 验证生成时间在可接受范围内
   - 检查内存使用情况

2. **复杂自动机**
   - 测试生成大量状态的文法
   - 验证表格显示性能

## 测试报告模板

```
测试日期：____
测试人员：____
程序版本：____

测试结果：
□ 基本功能正常
□ 分析表生成正确
□ 冲突检测准确
□ 界面操作流畅
□ 错误处理恰当

发现问题：
1. ____
2. ____

改进建议：
1. ____
2. ____
```

## 注意事项

1. 测试时注意观察控制台输出，可能包含调试信息
2. 大型文法的分析表可能很大，注意界面响应性
3. 保存功能测试时检查文件编码是否正确（UTF-8）
4. 不同操作系统下的界面显示可能略有差异

## 扩展测试

1. **与理论结果对比**
   - 手工计算简单文法的分析表
   - 与程序生成结果对比验证

2. **边界条件测试**
   - 单产生式文法
   - 包含ε产生式的文法
   - 左递归和右递归文法

3. **压力测试**
   - 连续生成多个分析表
   - 快速切换不同文法
   - 长时间运行稳定性测试